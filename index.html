<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- 基础元信息（移动端优先） -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>任务发布平台 · 体验发布</title>

  <!-- Open Graph 基本信息（用于分享到聊天/群聊时的卡片展示，平台是否采信取决于各自策略） -->
  <meta property="og:title" content="任务发布平台 · 体验发布">
  <meta property="og:description" content="3 步体验发布任务：选类型 → 填要点 → 一键提交（演示环境，不产生真实订单）">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#e33333">

  <style>
    /* ===== 设计主色（移动端优先：京东红） ===== */
    :root{
      --primary: #e33333;
      --primary-dark:#cc0000;
      --primary-light:#ff4d4d;
      --bg:#f7f7f7;
      --text:#333;
      --sub:#666;
      --muted:#9aa0a6;
      --card:#fff;
      --border:#ececec;
      --radius:12px;
      --radius-sm:8px;
      --shadow:0 6px 18px rgba(0,0,0,.06);
      --shadow-soft:0 2px 10px rgba(0,0,0,.06);
      --trans: all .25s ease;
    }

    /* ===== 全局重置 ===== */
    *{ box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html,body{ height:100%; }
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: "PingFang SC","Helvetica Neue",Arial,sans-serif;
      line-height:1.5; font-size:15px;
    }
    a{ color:inherit; text-decoration:none; }
    button{ font:inherit; }

    /* ===== 顶部栏 ===== */
    .appbar{
      position: sticky; top:0; z-index:50;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color:#fff;
      padding:12px 16px 14px;
      box-shadow:0 6px 16px rgba(227,51,51,.25);
    }
    .appbar-row{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px; font-weight:700;
      letter-spacing:.5px;
    }
    .brand-mark{
      width:28px; height:28px; border-radius:8px; background:#fff; color:var(--primary);
      display:grid; place-items:center; font-weight:900;
      box-shadow: inset 0 0 0 2px rgba(227,51,51,.15);
    }
    .brand b{font-size:16px}
    .wx-btn{
      border:1px solid rgba(255,255,255,.6);
      color:#fff; background:transparent;
      height:32px; padding:0 12px; border-radius:999px; cursor:pointer;
    }
    .wx-btn:active{ transform: scale(.98); }

    /* ===== 容器 ===== */
    .container{ padding:16px; padding-bottom:92px; max-width:520px; margin:0 auto; }

    /* ===== 横幅 ===== */
    .hero{
      background: radial-gradient(120% 120% at 0% 0%, #ff8888 0%, var(--primary) 60%, var(--primary-dark) 100%);
      color:#fff; border-radius:16px; padding:16px; box-shadow:var(--shadow);
      display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px;
    }
    .hero h1{ font-size:18px; margin:0 0 6px; }
    .hero p{ margin:0; opacity:.92; font-size:13px; }
    .hero-badge{
      background:#fff; color:var(--primary); font-weight:700; border-radius:999px; padding:6px 10px; font-size:12px;
    }

    /* ===== 分段标题 ===== */
    .section-title{ margin:18px 2px 12px; font-weight:700; font-size:16px; }

    /* ===== 分类宫格 ===== */
    .grid{
      display:grid; grid-template-columns:repeat(4,1fr); gap:10px;
    }
    .card-item{
      background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow-soft);
      padding:14px 8px; text-align:center; cursor:pointer; transition:var(--trans);
      border:1px solid var(--border);
    }
    .card-item:hover{ transform: translateY(-2px); }
    .card-ico{
      width:42px; height:42px; border-radius:50%; margin:0 auto 8px;
      background:#fff2f0; color:var(--primary); display:grid; place-items:center; font-weight:900;
    }
    .card-name{ font-size:13px; color:#333; }

    /* ===== 表单卡片 ===== */
    .card{
      background:var(--card); border-radius:16px; box-shadow:var(--shadow); border:1px solid var(--border);
      padding:14px; margin-top:12px;
    }
    .card-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:6px; }
    .card-head h3{ margin:0; font-size:16px; }
    .muted{ color:var(--muted); font-size:12px; }
    .row{ display:grid; grid-template-columns:1fr; gap:10px; margin-top:10px; }
    .form-label{ font-size:13px; color:#555; margin:2px 0 6px; }
    .ipt,.sel,.ta{
      width:100%; border:1px solid var(--border); background:#fafafa; border-radius:10px;
      height:42px; padding:0 12px; outline:none; transition:var(--trans);
      font-size:14px;
    }
    .ta{ height:auto; min-height:84px; padding:10px 12px; resize:vertical; }
    .ipt:focus,.sel:focus,.ta:focus{ background:#fff; box-shadow:0 0 0 3px rgba(227,51,51,.1); border-color:#f0a0a0; }

    /* 数量/时长控制 */
    .numbar{ display:flex; align-items:center; gap:8px; }
    .btn-ctrl{
      width:36px; height:36px; border-radius:10px; border:none; background:var(--primary);
      color:#fff; cursor:pointer;
    }
    .ipt-num{ width:70px; text-align:center; height:36px; border:1px solid var(--border); border-radius:10px; background:#fafafa; }

    /* 价格计算区 */
    .calc{
      margin-top:8px; padding:12px; border:1px dashed var(--border); border-radius:12px; background:#fcfcfc;
    }
    .calc-row{ display:flex; justify-content:space-between; align-items:center; margin:6px 0; font-size:14px; }
    .price{ font-weight:700; color:var(--primary); font-size:18px; }

    /* 同意与按钮 */
    .agree{ display:flex; align-items:flex-start; gap:8px; font-size:13px; color:#444; }
    .agree input{ margin-top:3px; }
    .submit{
      width:100%; height:46px; border:none; border-radius:999px; font-weight:700; color:#fff;
      background:var(--primary); margin-top:10px; box-shadow:0 10px 24px rgba(227,51,51,.25); cursor:pointer;
    }
    .submit[disabled]{ background:#bbb; box-shadow:none; cursor:not-allowed; }

    /* 成功弹窗（轻量无依赖） */
    .mask{ position:fixed; inset:0; background:rgba(0,0,0,.4); display:none; place-items:center; z-index:80; }
    .dialog{
      width:min(92vw, 440px); background:#fff; border-radius:16px; padding:16px; box-shadow:var(--shadow);
      transform: translateY(10px); transition: var(--trans);
    }
    .dialog h4{ margin:0 0 6px; }
    .dialog p{ margin:4px 0; color:#444; }
    .dialog .ok{ width:100%; height:42px; border:none; border-radius:10px; background:var(--primary); color:#fff; font-weight:700; }

    /* 顶部浮动 Tips（用于轻量 Toast） */
    .tips{
      position:fixed; top:8px; right:8px; background:rgba(0,0,0,.72); color:#fff; padding:10px 12px;
      border-radius:12px; font-size:12px; width: 260px; display:none; z-index:100;
    }
    .tips:after{
      content:""; position:absolute; top:-6px; right:22px; width:0; height:0;
      border-left:6px solid transparent; border-right:6px solid transparent; border-bottom:6px solid rgba(0,0,0,.72);
    }

    /* 底部固定信息条 */
    .footerbar{
      position:fixed; left:0; right:0; bottom:0; background:#fff; border-top:1px solid var(--border); z-index:40;
      padding:10px 12px; display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .footerbar small{ color:#666; }
    .mini{ height:34px; padding:0 12px; border-radius:999px; border:1px solid #ddd; background:#fff; cursor:pointer; }
    .mini.primary{ background:var(--primary); color:#fff; border:none; }

    /* 响应式 */
    @media (max-width:360px){
      .grid{ grid-template-columns: repeat(3,1fr); }
      .hero h1{ font-size:16px; }
    }
  </style>
</head>
<body>
  <!-- 顶部应用栏：品牌 + 联系微信 -->
  <header class="appbar">
    <div class="appbar-row">
      <div class="brand">
        <div class="brand-mark">任</div>
        <div><b>任务发布平台</b> · 体验发布</div>
      </div>
      <div style="display:flex; gap:8px;">
        <!-- 联系微信（点击复制指定微信号） -->
        <button class="wx-btn" id="btnWeChat">联系微信</button>
      </div>
    </div>
  </header>

  <!-- 内容容器 -->
  <main class="container">
    <!-- 顶部横幅（卖点与演示说明） -->
    <section class="hero">
      <div>
        <h1>3 步体验任务发布</h1>
        <p>选类型 → 填要点 → 一键提交（演示环境，不产生真实订单）</p>
      </div>
      <div class="hero-badge">无需登录</div>
    </section>

    <!-- 任务分类 -->
    <h2 class="section-title">选择任务类型</h2>
    <section class="grid" id="grid">
      <!-- 分类卡片（用文字与几何图形替代外部图标，减少外链依赖） -->
      <article class="card-item" data-type="live">
        <div class="card-ico">播</div>
        <div class="card-name">直播间</div>
      </article>
      <article class="card-item" data-type="comment">
        <div class="card-ico">评</div>
        <div class="card-name">评论区</div>
      </article>
      <article class="card-item" data-type="follow">
        <div class="card-ico">关</div>
        <div class="card-name">关注</div>
      </article>
      <article class="card-item" data-type="like">
        <div class="card-ico">赞</div>
        <div class="card-name">点赞</div>
      </article>
      <article class="card-item" data-type="share">
        <div class="card-ico">转</div>
        <div class="card-name">分享转发</div>
      </article>
      <article class="card-item" data-type="other">
        <div class="card-ico">其</div>
        <div class="card-name">其他</div>
      </article>
    </section>

    <!-- 表单卡片 -->
    <section class="card" id="formCard" style="display:none;">
      <div class="card-head">
        <h3 id="formTitle">发布任务</h3>
        <div class="muted" id="formHint">演示环境 · 提交后显示模拟订单号</div>
      </div>

      <!-- 平台选择 -->
      <div class="row">
        <div>
          <label class="form-label">选择平台</label>
          <select id="platform" class="sel">
            <option value="douyin">抖音</option>
            <option value="kuaishou">快手</option>
            <option value="channels">视频号</option>
            <option value="xiaohongshu">小红书</option>
            <option value="weibo">微博</option>
            <option value="meituan">美团</option>
            <option value="other">其他</option>
          </select>
        </div>

        <!-- 不同类型的特定字段（按需显示） -->
        <div id="fieldLive" style="display:none;">
          <label class="form-label">互动强度</label>
          <select id="interaction" class="sel">
            <option value="high">高互动（追问/活跃）</option>
            <option value="normal">普通互动（跟节奏）</option>
          </select>
        </div>

        <div>
          <label class="form-label" id="labelLink">目标链接 / 直播间ID</label>
          <input id="target" class="ipt" placeholder="示例：视频或笔记链接 / 直播间号" />
        </div>

        <!-- 数量与时长 -->
        <div id="blkPeople" class="">
          <label class="form-label" id="labelPeople">数量（人/条）</label>
          <div class="numbar">
            <button class="btn-ctrl" id="minus">-</button>
            <input id="num" class="ipt-num" type="number" min="1" step="1" value="10" />
            <button class="btn-ctrl" id="plus">+</button>
          </div>
        </div>

        <div id="blkHours" style="display:none;">
          <label class="form-label">时长（小时）</label>
          <div class="numbar">
            <button class="btn-ctrl" id="minusH">-</button>
            <input id="hours" class="ipt-num" type="number" min="1" step="1" value="1" />
            <button class="btn-ctrl" id="plusH">+</button>
          </div>
        </div>

        <div>
          <label class="form-label">补充说明（可选）</label>
          <textarea id="remark" class="ta" placeholder="可补充关键词、禁忌词、时间窗口等"></textarea>
        </div>
      </div>

      <!-- 价格计算（纯前端演算，演示口径） -->
      <div class="calc">
        <div class="calc-row"><span>单价</span><span id="unit">—</span></div>
        <div class="calc-row"><span>服务费（10%）</span><span id="fee">—</span></div>
        <div class="calc-row"><span>小计</span><span id="subtotal">—</span></div>
        <div class="calc-row" style="border-top:1px dashed var(--border); padding-top:8px;">
          <span>应付总额</span><span class="price" id="total">—</span>
        </div>
      </div>

      <!-- 同意提示 -->
      <label class="agree" style="margin-top:10px;">
        <input id="agree" type="checkbox" />
        <span>我已知悉：此页仅用于功能体验与演示，不会触发真实结算或产生实际收益/支出。</span>
      </label>

      <!-- 提交按钮：提交后 60 秒不可再次提交 -->
      <button id="submit" class="submit" disabled>立即体验发布</button>
    </section>
  </main>

  <!-- 底部固定信息条：声明 + 返回顶部 -->
  <footer class="footerbar">
    <small>
      免责声明：演示环境，仅用于体验发布流程。
      <b>此页面仅为展示页面，版权所有，禁止盗用。</b>
    </small>
    <div style="display:flex; gap:8px;">
      <button class="mini" id="toTop">返回顶部</button>
      <button class="mini primary" id="again" style="display:none;">再次体验</button>
    </div>
  </footer>

  <!-- 顶部浮动 Tips（作为轻量 Toast） -->
  <aside class="tips" id="tips">提示</aside>

  <!-- 成功弹窗 -->
  <div class="mask" id="mask">
    <div class="dialog">
      <h4>发布成功（演示）</h4>
      <p id="orderInfo">订单号：</p>
      <p id="moneyInfo">金额：</p>
      <p style="color:#666;">温馨提示：此为体验提交，不会真实扣款或派单。</p>
      <button class="ok" id="ok">知道了</button>
    </div>
  </div>

  <script>
    // ============================
    // 前端交互脚本（仅演示，不做真实下单）
    // 所有注释均为中文，便于沟通与后续维护
    // ============================

    // ---------- 工具函数：金额格式化 ----------
    const fmt = (n)=> (typeof n === 'number' && !isNaN(n)) ? (n.toFixed(2) + ' 元') : '—';

    // ---------- 定义不同任务类型的计算规则（演示口径） ----------
    // 约定：均不产生负数，且设置最低数量/时长等约束
    const PRICING = {
      live: (num, hours, interaction='normal') => {
        const unit = interaction === 'high' ? 10 : 8;   // 元/人·小时
        const subtotal = unit * num * hours;
        const fee = subtotal * 0.10;
        const total = subtotal + fee;
        return { unit:`${unit} 元/人·小时`, fee, subtotal, total };
      },
      comment: (num) => {
        const unit = 0.50; const subtotal = unit * num; const fee = subtotal * 0.10; const total = subtotal + fee;
        return { unit:`${unit.toFixed(2)} 元/条`, fee, subtotal, total };
      },
      follow: (num) => {
        const unit = 0.30; const subtotal = unit * num; const fee = subtotal * 0.10; const total = subtotal + fee;
        return { unit:`${unit.toFixed(2)} 元/次`, fee, subtotal, total };
      },
      like: (num) => {
        const unit = 0.20; const subtotal = unit * num; const fee = subtotal * 0.10; const total = subtotal + fee;
        return { unit:`${unit.toFixed(2)} 元/次`, fee, subtotal, total };
      },
      share: (num) => {
        const unit = 0.40; const subtotal = unit * num; const fee = subtotal * 0.10; const total = subtotal + fee;
        return { unit:`${unit.toFixed(2)} 元/次`, fee, subtotal, total };
      },
      other: (num) => {
        const unit = 1.00; const subtotal = unit * num; const fee = subtotal * 0.10; const total = subtotal + fee;
        return { unit:`${unit.toFixed(2)} 元/条`, fee, subtotal, total };
      }
    };

    // ---------- DOM 引用 ----------
    const grid = document.getElementById('grid');
    const formCard = document.getElementById('formCard');
    const formTitle = document.getElementById('formTitle');
    const formHint = document.getElementById('formHint');

    const platform = document.getElementById('platform');
    const interaction = document.getElementById('interaction');
    const fieldLive = document.getElementById('fieldLive');

    const labelLink = document.getElementById('labelLink');
    const target = document.getElementById('target');

    const blkPeople = document.getElementById('blkPeople');
    const blkHours = document.getElementById('blkHours');

    const labelPeople = document.getElementById('labelPeople');
    const num = document.getElementById('num');
    const hours = document.getElementById('hours');
    const minus = document.getElementById('minus');
    const plus = document.getElementById('plus');
    const minusH = document.getElementById('minusH');
    const plusH = document.getElementById('plusH');

    const unit = document.getElementById('unit');
    const fee = document.getElementById('fee');
    const subtotal = document.getElementById('subtotal');
    const total = document.getElementById('total');

    const agree = document.getElementById('agree');
    const submit = document.getElementById('submit');

    const tips = document.getElementById('tips');
    const toTop = document.getElementById('toTop');
    const again = document.getElementById('again');
    const btnWeChat = document.getElementById('btnWeChat');

    const mask = document.getElementById('mask');
    const ok = document.getElementById('ok');
    const orderInfo = document.getElementById('orderInfo');
    const moneyInfo = document.getElementById('moneyInfo');

    // 当前所选任务类型
    let currentType = null;

    // ---------- 初始化分类点击：展示对应表单与字段 ----------
    grid.addEventListener('click', (e)=>{
      const card = e.target.closest('.card-item');
      if(!card) return;
      currentType = card.dataset.type;

      const mapName = { live:'直播间', comment:'评论区', follow:'关注', like:'点赞', share:'分享转发', other:'其他' };
      formTitle.textContent = `${mapName[currentType] || '发布任务'}（体验）`;
      formHint.textContent = '演示环境 · 仅生成模拟订单号';

      fieldLive.style.display = (currentType==='live') ? 'block' : 'none';
      blkHours.style.display   = (currentType==='live') ? 'block' : 'none';

      if(currentType==='live'){
        labelLink.textContent = '直播间链接 / 房间号';
        labelPeople.textContent = '人数（人）';
        num.value = Math.max(10, Number(num.value)||10);
        hours.value = Math.max(1, Number(hours.value)||1);
      }else{
        labelLink.textContent = '目标链接';
        labelPeople.textContent = '数量（条/次）';
        num.value = Math.max(10, Number(num.value)||10);
      }

      formCard.style.display = 'block';
      formCard.scrollIntoView({behavior:'smooth', block:'start'});

      recalc();
      checkSubmit();
    });

    // ---------- 数量与时长的加减按钮 ----------
    minus.addEventListener('click', ()=>{
      const v = Math.max(1, Number(num.value||1) - 1);
      num.value = (currentType==='live') ? Math.max(10, v) : Math.max(1, v);
      recalc();
    });
    plus.addEventListener('click', ()=>{
      const v = Math.max(1, Number(num.value||1) + 1);
      num.value = v;
      if(currentType==='live') num.value = Math.max(10, v);
      recalc();
    });
    minusH?.addEventListener('click', ()=>{
      const v = Math.max(1, Number(hours.value||1) - 1);
      hours.value = v;
      recalc();
    });
    plusH?.addEventListener('click', ()=>{
      const v = Math.max(1, Number(hours.value||1) + 1);
      hours.value = v;
      recalc();
    });

    // 输入框变更即重算
    [num, hours, interaction, platform, target].forEach(el=>{
      el?.addEventListener('input', ()=>{ recalc(); });
      el?.addEventListener('change', ()=>{ recalc(); });
    });

    // 同意勾选决定能否提交
    agree.addEventListener('change', checkSubmit);

    // ---------- 金额重算 ----------
    function recalc(){
      if(!currentType){ unit.textContent = fee.textContent = subtotal.textContent = total.textContent = '—'; return; }
      const n = Math.max(1, Number(num.value||1));
      const h = Math.max(1, Number(hours.value||1));
      let res;
      if(currentType==='live'){ res = PRICING.live(n, h, interaction.value); }
      else if(currentType==='comment'){ res = PRICING.comment(n); }
      else if(currentType==='follow'){ res = PRICING.follow(n); }
      else if(currentType==='like'){ res = PRICING.like(n); }
      else if(currentType==='share'){ res = PRICING.share(n); }
      else{ res = PRICING.other(n); }

      unit.textContent = res.unit;
      fee.textContent = fmt(res.fee);
      subtotal.textContent = fmt(res.subtotal);
      total.textContent = fmt(res.total);
      checkSubmit();
    }

    // ---------- 提交按钮可用性检查 ----------
    function checkSubmit(){
      const ready = !!currentType && agree.checked && target.value.trim().length>0 && total.textContent!=='—';
      submit.disabled = !ready;
    }

    // ---------- 返回顶部 ----------
    toTop.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    // ---------- 联系微信：复制“Beguette”并提示前往添加 ----------
    btnWeChat.addEventListener('click', async ()=>{
      const wx = 'Beguette';
      try{
        await navigator.clipboard.writeText(wx);
        toast('微信号“Beguette”已复制，前往微信添加即可联系。');
      }catch{
        const ta = document.createElement('textarea');
        ta.value = wx; document.body.appendChild(ta);
        ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
        toast('微信号“Beguette”已复制，前往微信添加即可联系。');
      }
    });

    // ---------- 提交逻辑（演示）：成功弹窗 + 60 秒冷却 ----------
    let cooling = false;
    let remain = 0;
    let tickTimer = null;

    submit.addEventListener('click', ()=>{
      if(cooling) return;

      const oid = 'EXP' + Date.now().toString().slice(-8) + (Math.random().toString().slice(2,6));
      orderInfo.textContent = '订单号：' + oid;
      moneyInfo.textContent = '应付金额：' + total.textContent;

      mask.style.display='grid';

      cooling = true;
      remain = 60;
      submit.disabled = true;
      again.style.display = 'none';
      tick();
      tickTimer = setInterval(tick, 1000);
    });

    // 冷却倒计时显示
    function tick(){
      if(remain<=0){
        clearInterval(tickTimer);
        submit.disabled = false;
        submit.textContent = '立即体验发布';
        cooling = false;
        again.style.display = 'inline-block';
        toast('已解除 60 秒冷却，可再次体验。');
        return;
      }
      submit.textContent = `已提交（${remain}s 后可再次体验）`;
      remain--;
    }

    // 成功弹窗确认
    ok.addEventListener('click', ()=>{
      mask.style.display='none';
    });

    // 再次体验：重置核心字段（不绕过 60s 冷却）
    again.addEventListener('click', ()=>{
      target.value='';
      agree.checked=false;
      num.value = (currentType==='live') ? 10 : 10;
      hours.value = 1;
      recalc();
      checkSubmit();
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // ---------- 轻量 Toast ----------
    let toastTimer = null;
    function toast(text){
      tips.textContent = text;
      tips.style.display = 'block';
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>{ tips.style.display = 'none'; tips.textContent='提示'; }, 2200);
    }
  </script>
</body>
</html>
